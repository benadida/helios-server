{% extends TEMPLATE_BASE %}

{% block content %}
  <h2 class="title">{{election.name}} &mdash; Bulk Upload Voters <span style="font-size:0.7em;">[<a href="{% url "election@view" election.uuid %}">back to election</a>]</span></h2>

<form method="post" action="" id="upload_form" enctype="multipart/form-data">
<p>
    If you would like to specify your list of voters by name and email address,<br />
    you can bulk upload a list of such voters here.<br /><br />

    Please prepare a text file of comma-separated values with one of the following formats:
</p>

<p><strong>For token-based authentication:</strong></p>
<pre>
   token,&lt;email&gt;,&lt;full name&gt;
</pre>

<p><strong>For password-based authentication:</strong></p>
<pre>
   password,&lt;unique_id&gt;,&lt;email&gt;,&lt;full name&gt;
</pre>

<p><strong>For other authentication systems (GitHub, Google, etc.):</strong></p>
<pre>
   github,&lt;username&gt;
</pre>

<p>
<strong>Examples:</strong>
  </p>
  <pre>
      token,alice@example.com,Alice Smith
      token,bob@example.com,Bob Jones
      ...
  </pre>
  <p>or</p>
  <pre>
      password,alice123,alice@example.com,Alice Smith
      password,bob456,bob@example.com,Bob Jones
      ...
  </pre>
  <p>or</p>
  <pre>
      github,benadida
      ...
  </pre>

<p>
<strong>Important:</strong> You cannot mix different authentication methods in the same election.
All voters must use either token-based or password-based authentication, not both.
</p> 

  <p>
    The easiest way to prepare such a file is to use a spreadsheet program and to export as "CSV".
  </p>
  {% if error %}
  <div style="color: red;">{{error}}</div>
  {% endif %}
    <input type="hidden" name="csrf_token" value="{{csrf_token}}" />
    
    <input type="file" name="voters_file" />
    <input class="button" type="submit" value="go" />
</form>

<div id="processing">
</div>

<div id="done" style="display:none;">
  OK, done uploading.<br />
  You can now <a href="./manage">view the list of voters</a>.
</div>

{% endblock %}
